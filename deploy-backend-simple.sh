#!/bin/bash

echo "üìã Backend Deployment Instructions for Google Cloud Run"
echo "======================================================"
echo ""
echo "1Ô∏è‚É£  First, authenticate with Google Cloud:"
echo "   gcloud auth login"
echo ""
echo "2Ô∏è‚É£  Set your project:"
echo "   gcloud config set project parentload-ba995"
echo ""
echo "3Ô∏è‚É£  Navigate to the server directory:"
echo "   cd server"
echo ""
echo "4Ô∏è‚É£  Deploy to Cloud Run (this will build and deploy using the Dockerfile):"
echo "   gcloud run deploy parentload-backend \\"
echo "     --source . \\"
echo "     --region us-central1 \\"
echo "     --platform managed \\"
echo "     --allow-unauthenticated \\"
echo "     --port 8080 \\"
echo "     --memory 512Mi"
echo ""
echo "5Ô∏è‚É£  After deployment, set environment variables in Cloud Console:"
echo "   - Go to: https://console.cloud.google.com/run"
echo "   - Click on 'parentload-backend'"
echo "   - Click 'Edit & Deploy New Revision'"
echo "   - Go to 'Variables & Secrets' tab"
echo "   - Add these environment variables:"
echo "     ‚Ä¢ SENDGRID_API_KEY (your SendGrid API key)"
echo "     ‚Ä¢ SENDGRID_FROM_EMAIL=hello@allie.family"
echo "     ‚Ä¢ TWILIO_ACCOUNT_SID (if using SMS)"
echo "     ‚Ä¢ TWILIO_AUTH_TOKEN (if using SMS)"
echo "     ‚Ä¢ TWILIO_PHONE_NUMBER (if using SMS)"
echo "     ‚Ä¢ ANTHROPIC_API_KEY (if using Claude)"
echo "     ‚Ä¢ ANTHROPIC_SALES_API_KEY (for sales chat)"
echo "     ‚Ä¢ FRONTEND_URL=https://checkallie.com"
echo ""
echo "6Ô∏è‚É£  After deployment, update your frontend:"
echo "   - Note the service URL from Cloud Run"
echo "   - Create/update .env.production:"
echo "     REACT_APP_BACKEND_URL=https://[your-service-url]"
echo "   - Rebuild and deploy:"
echo "     npm run build && firebase deploy --only hosting"
echo ""
echo "üéØ That's it! Your backend will be live and emails will use the new templates."